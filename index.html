<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday â¤ï¸</title>
  <style>
    body { margin:0; overflow:hidden; background:#000; }
    canvas { display:block; }

    /* Chá»¯ chÃ­nh á»Ÿ giá»¯a */
    #text {
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      width:100%;
      text-align:center;
      font-family:Arial, sans-serif;
      font-size:22px;
      font-weight:bold;
      color:#fff;
      text-shadow:0 0 15px rgba(255,0,100,0.8);
      line-height:1.6;
    }

    /* NÃºt báº­t nháº¡c */
    #music-btn {
      position:absolute;
      bottom:20px;
      right:20px;
      padding:10px 15px;
      background:rgba(255,255,255,0.1);
      border:1px solid #fff;
      border-radius:10px;
      color:#fff;
      cursor:pointer;
      font-size:16px;
      transition:0.3s;
    }
    #music-btn:hover { background:rgba(255,255,255,0.3); }
  </style>
</head>
<body>
  <canvas id="bg"></canvas>

  <!-- Lá»i chÃºc chÃ­nh -->
  <div id="text">
    <p>Tuáº¥n â¤ï¸ Nga</p>
    <p>BÃ© iuuu cá»§a anh thÃªm tuá»•i má»›i rá»“i, bá»›t bÆ°á»›ng 1 xÃ­u nha ğŸ˜†ğŸ’•</p>
    <p>Sau nÃ y dÃ¹ nhÆ° nÃ o Ä‘i ná»¯a, anh váº«n mong em luÃ´n bÃ¬nh yÃªn vÃ  háº¡nh phÃºc ğŸ’–</p>
    <p>ChÃºc em bÃ© cá»§a anh tháº­t máº¡nh máº½ trÃªn con Ä‘Æ°á»ng phÃ­a trÆ°á»›c ğŸ’ªğŸŒ¸ğŸŒº</p>
    <p>Sau nÃ y, em váº«n luÃ´n lÃ  má»™t pháº§n Ä‘áº·c biá»‡t trong tim anh ğŸ’“ğŸ’—</p>
  </div>

  <!-- Nháº¡c -->
  <audio id="bg-music" loop>
    <source src="https://cdn.pixabay.com/download/audio/2023/03/14/audio_3b5b7ba7c.mp3?filename=romantic-piano-melody-141148.mp3" type="audio/mpeg">
  </audio>
  <button id="music-btn">ğŸµ Báº­t nháº¡c</button>

  <!-- Three.js -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
  <script>
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({canvas:document.getElementById("bg"), alpha:true});
    renderer.setSize(window.innerWidth, window.innerHeight);

    // Háº¡t tim
    const particles = [];
    const particleCount = 800;
    const geometry = new THREE.BufferGeometry();
    const positions = new Float32Array(particleCount*3);

    function heartFunction(t) {
      const x = 16*Math.pow(Math.sin(t),3);
      const y = 13*Math.cos(t) - 5*Math.cos(2*t) - 2*Math.cos(3*t) - Math.cos(4*t);
      return new THREE.Vector3(x*0.1, y*0.1, 0);
    }

    for(let i=0;i<particleCount;i++){
      const t = Math.random()*Math.PI*2;
      const v = heartFunction(t);
      positions[i*3] = v.x + (Math.random()-0.5)*0.5;
      positions[i*3+1] = v.y + (Math.random()-0.5)*0.5;
      positions[i*3+2] = (Math.random()-0.5)*0.5;
      particles.push({vx:positions[i*3], vy:positions[i*3+1], vz:positions[i*3+2]});
    }

    geometry.setAttribute('position', new THREE.BufferAttribute(positions,3));
    const material = new THREE.PointsMaterial({color:0xff0040, size:0.1});
    const pointCloud = new THREE.Points(geometry, material);
    scene.add(pointCloud);

    // Text xoay quanh tim
    const textCanvas = document.createElement('canvas');
    textCanvas.width = 1024;
    textCanvas.height = 256;
    const ctx = textCanvas.getContext('2d');
    ctx.font = "40px Arial";
    ctx.fillStyle = "pink";
    ctx.textAlign="center";
    ctx.fillText("ğŸ’–  ğŸ’• Sau nÃ y em váº«n luÃ´n lÃ  má»™t pháº§n Ä‘áº·c biá»‡t trong tim anh
  ğŸ’", 512,128);

    const textTexture = new THREE.CanvasTexture(textCanvas);
    const textMat = new THREE.SpriteMaterial({map:textTexture});
    const textSprite = new THREE.Sprite(textMat);
    textSprite.scale.set(10,2.5,1);
    scene.add(textSprite);

    camera.position.z = 15;

    let clock = new THREE.Clock();

    function animate(){
      requestAnimationFrame(animate);
      const t = clock.getElapsedTime();

      // Háº¡t ná»• tung rá»“i gom láº¡i
      const positions = pointCloud.geometry.attributes.position.array;
      for(let i=0;i<particleCount;i++){
        const s = Math.sin((t%5)/5 * Math.PI); 
        positions[i*3] = particles[i].vx * (1+s*2);
        positions[i*3+1] = particles[i].vy * (1+s*2);
        positions[i*3+2] = particles[i].vz * (1+s*2);
      }
      pointCloud.geometry.attributes.position.needsUpdate = true;

      // Chá»¯ xoay quanh tim
      const radius = 7;
      textSprite.position.x = Math.cos(t)*radius;
      textSprite.position.z = Math.sin(t)*radius;
      textSprite.position.y = 2*Math.sin(t*0.5);

      renderer.render(scene,camera);
    }
    animate();

    // Báº­t/táº¯t nháº¡c
    const music = document.getElementById("bg-music");
    const btn = document.getElementById("music-btn");
    let playing = false;
    btn.addEventListener("click",()=>{
      if(playing){ music.pause(); btn.textContent="ğŸµ Báº­t nháº¡c"; }
      else { music.play(); btn.textContent="â¸ Táº¯t nháº¡c"; }
      playing=!playing;
    });

    window.addEventListener("resize",()=>{
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
